(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,497140,e=>{"use strict";let s=(0,e.i(475254).default)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);e.s(["default",()=>s])},870273,e=>{"use strict";var s=e.i(497140);e.s(["Star",()=>s.default])},870351,e=>{"use strict";var s=e.i(843476),t=e.i(271645),r=e.i(790597);function a(){try{let e=localStorage.getItem("wishlist");if(!e)return[];let s=JSON.parse(e);return Array.isArray(s)?s:[]}catch{return[]}}function i({slug:e,size:i=20}){let[l,n]=(0,t.useState)(!1),d=(0,t.useRef)(null),c=(0,t.useCallback)(()=>{n(a().includes(e))},[e]);return(0,t.useEffect)(()=>{queueMicrotask(()=>{c()})},[c]),(0,t.useEffect)(()=>{let e=e=>{"wishlist"===e.key&&c()},s=()=>c();return window.addEventListener("storage",e),window.addEventListener("wishlist-updated",s),()=>{window.removeEventListener("storage",e),window.removeEventListener("wishlist-updated",s)}},[c]),(0,t.useEffect)(()=>{let e=null;d.current&&"IntersectionObserver"in window&&(e=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&c()})},{threshold:.1})).observe(d.current);let s=()=>c(),t=()=>c();return window.addEventListener("visibilitychange",s),window.addEventListener("focus",t),()=>{e&&d.current&&e.unobserve(d.current),window.removeEventListener("visibilitychange",s),window.removeEventListener("focus",t)}},[c]),(0,s.jsx)("button",{ref:d,onClick:()=>{let s=a(),t=s.includes(e),r=t?s.filter(s=>s!==e):[...s,e];localStorage.setItem("wishlist",JSON.stringify(r)),n(!t),window.dispatchEvent(new CustomEvent("wishlist-updated"))},className:"p-1 rounded-full bg-white/80 hover:bg-white transition shadow-sm","aria-label":l?"Remove from wishlist":"Add to wishlist",children:(0,s.jsx)(r.Heart,{size:i,className:`transition-all ${l?"fill-red-500 text-red-500":"text-gray-600"}`})})}e.s(["default",()=>i])},931918,e=>{"use strict";function s(e){switch(e){case"silver":return"Silver 99.9%";case"silverJewellery":return"Silver Jewellery";case"gold24K":return"Gold 24K 999";case"gold22K":return"Gold 22K 916";case"gold18K":return"Gold 18K 75%";default:return e}}e.s(["default",()=>s])},130608,e=>{"use strict";function s({purity:e="gold24K",variant:s,rates:t}){if(!t||!s)return null;let r=0;switch(e){case"gold24K":r=t.gold24K;break;case"gold22K":r=t.gold22K;break;case"gold18K":r=t.gold18K;break;default:r=t.silver}if(!r||!s.makingCharges&&s.makingCharges<0)return null;let a=void 0===s.priceAdjustment?0:s.priceAdjustment,i=(s.weight||0)*r,l=(i+a)*(s.makingCharges||0)/100,n=i+l,d=Math.round(n+.03*n),c=s.discount&&s.discount>0?d/(1-s.discount/100):d,o=Math.round(d);return{...s,price:o,MRP:Math.round(c)}}function t(e,t){return e.items.reduce((e,r)=>{let a=r.product;if(!a)return e;let i=s({purity:a.purity,variant:a.variants[r.variantIndex],rates:t});return e+(i?.price??0)*r.qty},0)}e.s(["calculateFinal",()=>t,"calculatePrice",()=>s])},669402,e=>{"use strict";e.i(247167);var s=e.i(843476),t=e.i(271645),r=e.i(522016),a=e.i(657688),i=e.i(870351),l=e.i(870273);function n({rating:e,count:t=0,size:r=16,showExpert:a=!0}){let i=Math.floor(e),n=e%1>=.5;return!Number.isFinite(e)||e<=0?null:(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,s.jsx)("div",{className:"flex items-center gap-0.5 text-amber-500",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>t<i?(0,s.jsx)(l.Star,{size:r,fill:"currentColor"},t):t===i&&n?(0,s.jsx)(l.Star,{size:r,className:"text-amber-500",fill:"currentColor",style:{clipPath:"inset(0 50% 0 0)"}},t):(0,s.jsx)(l.Star,{size:r,className:"text-muted-foreground"},t))}),(0,s.jsx)("span",{className:"font-medium text-foreground",children:e.toFixed(1)}),t>0&&a&&(0,s.jsxs)("span",{className:"text-muted-foreground",children:["· Expert rating (",t,")"]})]})}var d=e.i(931918),c=e.i(162022),o=e.i(130608);function u({product:e,variant:t=0}){let r=(0,c.useRates)();if(!e.variants[t].makingCharges)return null;let a=(0,o.calculatePrice)({purity:e.purity,variant:e.variants[t],rates:r});if(a?.price&&a?.price===null)return null;let i=e.variants[0].available,l=a?.price?.toLocaleString("en-IN"),n=a?.MRP?.toLocaleString("en-IN");return(0,s.jsxs)("div",{className:"space-y-3",children:[a?.price!=null&&null!=a.MRP&&null!=a.discount&&a.discount>0&&(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,s.jsxs)("span",{className:"line-through text-gray-500",children:["₹",n]}),a.discount&&a.discount>0&&(0,s.jsxs)("span",{className:"rounded-full bg-accent text-surface px-2 py-0.5 text-xs font-semibold",children:[a.discount,"% OFF"]})]}),(0,s.jsxs)("div",{className:"font-semibold text-primary-dark",children:[!i&&"","₹",l]})]})}function m({product:e,variant:l=0}){let c=e.images||[],o=c.length>1,[m,x]=(0,t.useState)(0),h=Number(e.rating),p=Number(e.ratingCount),f=e.newArrival?"shadow-md hover:shadow-xl ":"shadow hover:shadow-lg",v=`https://sapnashrijewellers.in/static/img/products/thumbnail/${c[m]}`;return(0,s.jsx)(r.default,{href:`/product/${e.slug}/`,className:"block transition-transform duration-300 hover:scale-105 rounded-2xl",prefetch:!1,onClick:e=>{o&&0===m&&(e.preventDefault(),x(1))},children:(0,s.jsxs)("div",{className:` flex flex-col h-full bg-card ${f} rounded-2xl`,children:[(0,s.jsxs)("div",{className:"relative w-full overflow-hidden grow pt-[100%]",onMouseEnter:()=>o&&x(1),onMouseLeave:()=>o&&x(0),children:[(0,s.jsx)("div",{className:"absolute top-2 right-2 z-20",children:(0,s.jsx)(i.default,{slug:e.slug})}),e.newArrival&&(0,s.jsx)("span",{className:"absolute top-2 left-2 z-10 bg-accent text-accent-foreground text-xs px-2 py-1 rounded-full shadow-md",children:"✨ NEW"}),(0,s.jsx)(a.default,{src:v,alt:e.name,className:"absolute inset-0 w-full h-full object-cover transition-opacity duration-300 rounded-t-2xl",title:e.name,priority:!1,fill:!0}),o&&(0,s.jsx)("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 flex gap-1",children:c.slice(0,2).map((e,t)=>(0,s.jsx)("span",{className:`h-1.5 w-1.5 rounded-full transition ${m===t?"bg-white":"bg-white/50"}`},t))})]}),(0,s.jsxs)("div",{className:"p-3",children:[(0,s.jsx)("h3",{className:"leading-tight line-clamp-2 w-full",children:e.name}),(0,s.jsx)(u,{product:e,variant:l}),h>0&&p>0&&(0,s.jsx)("div",{className:"mt-1",children:(0,s.jsx)(n,{rating:h,count:p,size:14,showExpert:!1})}),(0,s.jsxs)("div",{className:"flex justify-between text-xs mt-1 opacity-80",children:[(0,s.jsx)("span",{children:(0,d.default)(e.purity)}),(0,s.jsxs)("span",{children:[e.variants[l].weight," gm"]})]})]})]})})}e.s(["default",()=>m],669402)},717521,e=>{"use strict";let s=(0,e.i(475254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["default",()=>s])},572459,e=>{"use strict";let s=(0,e.i(475254).default)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);e.s(["default",()=>s])},531278,e=>{"use strict";var s=e.i(717521);e.s(["Loader2",()=>s.default])},169691,e=>{"use strict";e.i(247167);var s=e.i(843476),t=e.i(271645),r=e.i(669402),a=e.i(531278),i=e.i(572459),i=i,l=e.i(415930),n=e.i(520749);e.i(151718);var d=e.i(618357),c=e.i(672972);function o(){let{user:e,loading:r}=(0,l.useAuth)(),[o,m]=(0,t.useState)([]),[x,h]=(0,t.useState)(!0);return((0,t.useEffect)(()=>{r||e||(0,d.signInWithPopup)(n.auth,n.googleProvider).catch(e=>console.error("Auth failed",e))},[r,e]),(0,t.useEffect)(()=>{e?.uid&&(async()=>{try{h(!0);let s=await fetch(`https://tight-sky-9fb5.ssjn.workers.dev//orders?uid=${e.uid}`),t=((await s.json()).orders||[]).filter(e=>e.items?.length>0);m(t)}catch(e){console.error("Failed to load orders",e)}finally{h(!1)}})()},[e?.uid]),r||x)?(0,s.jsx)("div",{className:"flex justify-center py-20",children:(0,s.jsx)(a.Loader2,{className:"animate-spin"})}):e?0===o.length?(0,s.jsxs)("div",{className:"text-center py-20 space-y-3",children:[(0,s.jsx)(i.default,{size:40,className:"mx-auto opacity-60"}),(0,s.jsx)("p",{className:"text-muted",children:"You haven’t placed any orders yet."})]}):(0,s.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-8 space-y-10",children:[(0,s.jsx)("h1",{className:"text-3xl font-yatra",children:"My Orders"}),o.map(e=>(0,s.jsx)(u,{order:e,products:c.default},e.orderId))]}):(0,s.jsx)("div",{className:"text-center py-20",children:"Please sign in to view orders."})}function u({order:e,products:t}){return(0,s.jsxs)("div",{className:"border border-theme rounded-xl p-6 space-y-4 bg-surface",children:[(0,s.jsxs)("div",{className:"flex justify-between flex-wrap gap-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"text-sm text-muted",children:["Order ID: ",(0,s.jsx)("span",{className:"font-mono",children:e.orderId})]}),(0,s.jsxs)("p",{className:"text-sm text-muted",children:["Placed on: ",new Date(e.createdAt).toLocaleDateString()]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-sm text-muted",children:"Order Total"}),(0,s.jsxs)("p",{className:"text-lg font-semibold",children:["₹",e.priceSummary.finalPrice]})]})]}),(0,s.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:e.items.map((e,a)=>{let i=t.find(s=>s.id==e.productId);return(0,s.jsx)("div",{className:"space-y-2",children:i?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.default,{product:i,variant:e.variantIndex}),(0,s.jsxs)("p",{className:"text-sm text-muted text-center",children:["Qty: ",e.qty]})]}):(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"border border-theme rounded-lg p-4 bg-surface text-center space-y-1",children:[(0,s.jsx)("p",{className:"font-medium",children:e.title}),(0,s.jsxs)("p",{className:"text-sm text-muted",children:["Qty: ",e.qty]}),(0,s.jsx)("p",{className:"text-xs text-muted",children:"(Product no longer available)"})]})})},a)})}),(0,s.jsxs)("div",{className:"border-t border-theme pt-4 space-y-1",children:[(0,s.jsx)("h3",{className:"font-medium",children:"Delivery Address"}),(0,s.jsx)("p",{children:e.address.name}),(0,s.jsx)("p",{className:"text-sm text-muted",children:e.address.mobile}),(0,s.jsx)("p",{className:"text-sm whitespace-pre-line",children:e.address.address}),(0,s.jsxs)("p",{className:"text-sm",children:[e.address.city," – ",e.address.pin]})]}),(0,s.jsxs)("div",{className:"border-t border-theme pt-4 space-y-1",children:[(0,s.jsx)("h3",{className:"font-medium",children:"Payment"}),(0,s.jsxs)("p",{className:"text-sm",children:["Method: ",(0,s.jsx)("span",{className:"font-semibold",children:e.payment.method})]}),e.payment.reference&&(0,s.jsxs)("p",{className:"text-sm text-muted",children:["Reference: ",e.payment.reference]})]}),(0,s.jsxs)("div",{className:"border-t border-theme pt-4 text-sm space-y-1",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Products"}),(0,s.jsxs)("span",{children:["₹",e.priceSummary.productTotal]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Shipping"}),(0,s.jsxs)("span",{children:["₹",e.priceSummary.shipping]})]}),e.priceSummary.cod>0&&(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"COD Charges"}),(0,s.jsxs)("span",{children:["₹",e.priceSummary.cod]})]}),(0,s.jsxs)("div",{className:"flex justify-between font-semibold border-t border-theme pt-2",children:[(0,s.jsx)("span",{children:"Total Paid"}),(0,s.jsxs)("span",{children:["₹",e.priceSummary.finalPrice]})]})]}),(0,s.jsxs)("div",{className:"pt-3 border-t border-theme text-right text-sm",children:[(0,s.jsx)("span",{className:"text-muted",children:"You paid:"})," ",(0,s.jsxs)("span",{className:"font-semibold",children:["₹",e.priceSummary.finalPrice]})]})]})}e.s(["default",()=>o],169691)}]);